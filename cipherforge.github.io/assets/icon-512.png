from PIL import Image, ImageDraw, ImageFont

def create_emoji_icon(size):
    img = Image.new('RGBA', (size, size), (44, 62, 80, 255))
    draw = ImageDraw.Draw(img)
    
    # Try to use emoji font
    try:
        # Try different font paths
        font_paths = [
            "seguiemj.ttf",  # Windows
            "Apple Color Emoji.ttf",  # Mac
            "NotoColorEmoji.ttf",  # Linux
            "arial.ttf",  # Fallback
        ]
        
        font = None
        for font_path in font_paths:
            try:
                font = ImageFont.truetype(font_path, size // 2)
                break
            except:
                continue
        
        if font is None:
            raise Exception("No suitable font found")
            
    except:
        # Fallback: Draw a simple lock shape
        # Background circle
        draw.ellipse([size//10, size//10, size-size//10, size-size//10], 
                    fill=(52, 152, 219, 255))
        
        # Lock body (rectangle)
        lock_width = size // 2
        lock_height = size // 3
        x = (size - lock_width) // 2
        y = (size - lock_height) // 2
        
        draw.rectangle([x, y, x+lock_width, y+lock_height], 
                      fill=(41, 128, 185, 255))
        
        # Lock arch (semi-circle on top)
        arch_height = size // 6
        draw.ellipse([x-arch_height//2, y-arch_height, 
                     x+lock_width+arch_height//2, y], 
                    fill=(41, 128, 185, 255))
        
        # Keyhole
        keyhole_size = size // 12
        draw.ellipse([(size-keyhole_size)//2, 
                     (size-keyhole_size)//2, 
                     (size+keyhole_size)//2, 
                     (size+keyhole_size)//2], 
                    fill=(44, 62, 80, 255))
        
        return img
    
    # Draw lock emoji (if font worked)
    # Calculate position to center the emoji
    emoji_size = size // 2
    x = (size - emoji_size) // 2
    y = (size - emoji_size) // 2
    
    draw.text((x, y), "ðŸ”’", 
              fill=(255, 255, 255, 255), font=font)
    
    return img

# Create BOTH icons with the same function
create_emoji_icon(192).save("assets/icon-192.png")
create_emoji_icon(512).save("assets/icon-512.png")

print("âœ… Created both icons:")
print("   - assets/icon-192.png (192Ã—192)")
print("   - assets/icon-512.png (512Ã—512)")
